(()=>{function f({state:o,endpoint:l,apiKey:r,acceptedTypes:n=[],maxFileSize:h=null,maxFiles:p=1}){return{state:o,endpoint:l,apiKey:r,acceptedTypes:n,maxFileSize:h,maxFiles:p,files:[],uploading:!1,uploadProgress:0,error:null,init(){this.state&&(this.files=Array.isArray(this.state)?this.state:[this.state]),this.$watch("files",e=>{this.state=this.maxFiles===1?e[0]||null:e})},async handleFileSelect(e){let t=Array.from(e.target.files);if(this.files.length+t.length>this.maxFiles){this.error=`Maximum ${this.maxFiles} file(s) allowed`;return}for(let s of t){if(this.maxFileSize&&s.size>this.maxFileSize){this.error=`File size exceeds maximum of ${this.formatFileSize(this.maxFileSize)}`;continue}await this.uploadFile(s)}e.target.value=""},async uploadFile(e){this.uploading=!0,this.uploadProgress=0,this.error=null;try{let t=await fetch("https://api.uploadthing.com/v6/uploadFiles",{method:"POST",headers:{"Content-Type":"application/json","X-Uploadthing-Api-Key":this.apiKey},body:JSON.stringify({files:[{name:e.name,size:e.size,type:e.type}],metadata:{},contentDisposition:"inline"})});if(!t.ok)throw new Error("Failed to get upload URL");let i=(await t.json()).data[0],a=new FormData;if(Object.entries(i.fields).forEach(([d,u])=>{a.append(d,u)}),a.append("file",e),!(await fetch(i.url,{method:"POST",body:a})).ok)throw new Error("Upload failed");this.files.push({name:e.name,size:e.size,type:e.type,url:i.fileUrl,key:i.key}),this.uploadProgress=100}catch(t){console.error("Upload error:",t),this.error=t.message||"Upload failed"}finally{this.uploading=!1,setTimeout(()=>{this.uploadProgress=0},1e3)}},removeFile(e){this.files.splice(e,1)},formatFileSize(e){if(e===0)return"0 Bytes";let t=1024,s=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(t));return Math.round(e/Math.pow(t,i)*100)/100+" "+s[i]}}}})();
